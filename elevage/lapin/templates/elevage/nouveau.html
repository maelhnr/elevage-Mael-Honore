{% extends 'base.html' %}

{% block title %}Nouvel √©levage{% endblock %}

{% block content %}
<h1>üê∞ Cr√©er un nouvel √©levage</h1>

{% if form.non_field_errors %}
    <div class="alert alert-danger">
        {% for error in form.non_field_errors %}
            <p>{{ error }}</p>
        {% endfor %}
    </div>
{% endif %}

<form method="post" class="mt-4">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="btn btn-primary">D√©marrer la partie</button>
</form>

<!-- Nouveau bloc : Choix de la difficult√© et affichage des probabilit√©s -->
<div class="mt-5">
    <h2 style="font-size: 1.5rem;">üéØ Niveau de difficult√©</h2>

    <!-- Boutons de s√©lection -->
    <div class="form-group mt-3">
        <button type="button" class="btn btn-outline-success btn-lg mr-3 text-dark" id="difficulte_facile">
            üçÄ Facile
        </button>
        <button type="button" class="btn btn-outline-primary btn-lg mr-3 text-dark" id="difficulte_moyen">
            üåä Moyen
        </button>
        <button type="button" class="btn btn-outline-danger btn-lg mr-3 text-dark" id="difficulte_difficile">
            üî• Difficile
        </button>
    </div>

    <!-- Probabilit√©s affich√©es dynamiquement -->
    <div id="probabilites_sante" style="font-size: 1.2rem; margin-top: 20px;">
        <p>Proba de tomber malade : <span id="prob_maladie">10%</span></p>
        <p>Proba de gu√©rison : <span id="prob_guerison">70%</span></p>
    </div>

    <!-- Champ cach√© pour envoyer la difficult√© au backend -->
    <input type="hidden" name="difficulte" id="difficulte" value="facile">
</div>

<!-- Script JavaScript pour g√©rer l'interaction -->
<script>
    const boutonsDifficulte = document.querySelectorAll('[id^="difficulte_"]');
    const probMaladie = document.getElementById('prob_maladie');
    const probGuerison = document.getElementById('prob_guerison');
    const champCacheDifficulte = document.getElementById('difficulte');  

    function resetBoutons() {
        boutonsDifficulte.forEach(function(button) {
            button.classList.remove('btn-success', 'btn-primary', 'btn-danger');
            button.classList.add('btn-outline-success', 'btn-outline-primary', 'btn-outline-danger');
            button.classList.add('text-dark');
        });
    }

    boutonsDifficulte.forEach(function(button) {
        button.addEventListener('click', function() {
            resetBoutons();

            if (button.id === 'difficulte_facile') {
                button.classList.remove('btn-outline-success');
                button.classList.add('btn-success');
                champCacheDifficulte.value = 'facile';
                probMaladie.textContent = '10%';
                probGuerison.textContent = '70%';
            } else if (button.id === 'difficulte_moyen') {
                button.classList.remove('btn-outline-primary');
                button.classList.add('btn-primary');
                champCacheDifficulte.value = 'moyen';
                probMaladie.textContent = '30%';
                probGuerison.textContent = '50%';
            } else if (button.id === 'difficulte_difficile') {
                button.classList.remove('btn-outline-danger');
                button.classList.add('btn-danger');
                champCacheDifficulte.value = 'difficile';
                probMaladie.textContent = '50%';
                probGuerison.textContent = '30%';
            }
        });
    });
</script>

<!-- CSS personnalis√© pour emp√™cher les boutons de devenir rouges lors du survol -->
<style>
    /* Emp√™che les boutons faciles et moyens de devenir rouges au survol */
    .btn-outline-success:hover {
        border-color: #28a745 !important;
        color: #28a745 !important;
        background-color: transparent !important;
    }

    .btn-outline-primary:hover {
        border-color: #007bff !important;
        color: #007bff !important;
        background-color: transparent !important;
    }

    .btn-outline-danger:hover {
        border-color: #dc3545 !important;
        color: #dc3545 !important;
        background-color: transparent !important;
    }

    /* Garde la police des boutons en noir */
    .btn-outline-success, .btn-outline-primary, .btn-outline-danger {
        color: black !important;
    }
</style>


{% endblock %}


